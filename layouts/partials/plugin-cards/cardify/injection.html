{{- with (.Scratch.Get "plugin-cards.Parameters").Cardify -}}

{{- $source_dir := "sass/plugin-cards/" -}}
{{- $template_name := "cardify.scss" -}}
{{- $source := path.Join $source_dir $template_name -}}
{{- $target := path.Join "assets" $source -}}
{{- $style := resources.Get $source | resources.ExecuteAsTemplate $target $ -}} 

{{- $target = $target | replaceRE "sass|scss" "css" -}}
{{- $options := dict "targetPath" $target  "outputStyle" .Config.SassOutput -}}
{{- $style = $style | toCSS $options -}}

{{- if .Config.Fingerprint }}{{ $style = $style | fingerprint }}{{ end -}}

{{- print "\n" -}}
<link rel="stylesheet" href="{{ $style.Permalink }}">

{{- end }}